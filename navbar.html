<div class="navbar">
    <div class="menu-item">
        <a href="/d_dash/index.html">Home</a>
    </div>
    <div class="menu-item">
        <a href="#">Balances</a>
        <div class="submenu"></div>
    </div>
    <div class="menu-item">
        <a href="#">Prices</a>
        <div class="submenu"></div>
    </div>
    <div class="menu-item">
        <a href="#">Demand</a>
        <div class="submenu">
            <a href="/d_dash/test/wx_temps.html">Test</a>
            <a href="/d_dash/test/wx_temps.html">Test2</a>
        </div>
    </div>
    <div class="menu-item">
        <a href="#">Supply</a>
        <div class="submenu"></div>
    </div>
    <div class="menu-item">
        <a href="#">Storage</a>
        <div class="submenu">
            <a href="/d_dash/storage/nwe_stg.html">NWE</a>
            <a href="/d_dash/storage/cee_stg.html">CEE</a>
            <a href="/d_dash/storage/see_stg.html">SEE</a>
            <a href="/d_dash/storage/swe_stg.html">SWE</a>
        </div>
    </div>
    <div class="menu-item">
        <a href="#">Pipelines</a>
        <div class="submenu"></div>
    </div>
    <div class="menu-item">
        <a href="#">Weather</a>
        <div class="submenu">
            <a href="/d_dash/test/wx_temps.html">Test</a>
            <a href="/d_dash/test/wx_temps.html">Test2</a>
        </div>
    </div>

    <!-- User Info & Logout Button -->
    <div class="menu-item user-info">
        <span id="user-greeting" style="display: none;">Welcome, <span id="username"></span></span>
        <button id="logout-btn" onclick="logout()" style="display: none;">Logout</button>
    </div>
</div>

<script>
    // Ensure the script only runs when the page is fully loaded
    window.addEventListener("load", function() {
        console.log("‚úÖ Navbar Script Loaded"); // Debugging

        const authStatus = localStorage.getItem("auth");
        const username = localStorage.getItem("username");

        console.log("Auth Status:", authStatus); // Debugging
        console.log("Username:", username); // Debugging

        const userGreeting = document.getElementById("user-greeting");
        const usernameSpan = document.getElementById("username");
        const logoutBtn = document.getElementById("logout-btn");

        if (!userGreeting || !usernameSpan || !logoutBtn) {
            console.error("‚ùå Navbar elements not found in DOM.");
            return;
        }

        if (authStatus === "true") { // Ensure correct string comparison
            usernameSpan.innerText = username; // Show username
            userGreeting.style.display = "inline-block"; // Show greeting
            logoutBtn.style.display = "inline-block"; // Show logout button
            console.log("‚úÖ Logout button should now be visible."); // Debugging
        } else {
            console.log("‚ùå User is not logged in, hiding logout button.");
        }
    });

    function logout() {
        console.log("üî¥ Logging out..."); // Debugging
        localStorage.removeItem("auth");
        localStorage.removeItem("username");
        window.location.href = "/d_dash/login.html";
    }
</script>
